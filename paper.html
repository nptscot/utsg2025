<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Robin Lovelace">
<meta name="author" content="Zhao Wang">
<meta name="author" content="Hussein Mahfouz">
<meta name="author" content="Juan Pablo Fonseca Zamora">
<meta name="author" content="Martin Lucas-Smith">
<meta name="author" content="Malcolm Morgan">
<meta name="author" content="Dustin Carlino">
<meta name="author" content="Angus Calder">
<meta name="author" content="Congying Hu">
<meta name="author" content="Michael Naysmith">
<meta name="author" content="Matthew Davis">

<title>Integrating diverse data sources to support future-proof transport modelling – Integrating Diverse Data Sources for Future-Proof Transport Modelling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b655315ba72dbb24d82483816a1a8362.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Integrating Diverse Data Sources for Future-Proof Transport Modelling</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./slides.html"> 
<span class="menu-text">Slides</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./paper.html" aria-current="page"> 
<span class="menu-text">Paper</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Integrating diverse data sources to support future-proof transport modelling</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Robin Lovelace </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Leeds, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Zhao Wang </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Leeds, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Hussein Mahfouz </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Leeds, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Juan Pablo Fonseca Zamora </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Leeds, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Martin Lucas-Smith </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            CycleStreets Ltd, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Malcolm Morgan </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Leeds, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Dustin Carlino </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            A/B Street Ltd, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Angus Calder </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Sustrans Scotland, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Congying Hu </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Sustrans Scotland, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Michael Naysmith </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Sustrans Scotland, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Matthew Davis </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Sustrans Scotland, UK
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="abstract" class="level1">
<h1>Abstract</h1>
<p>Transport models historically rely on limited input datasets, such as ‘trip generators’ and simplified networks, leading to biases and blind-spots. This lack of data diversity can lead to biases and blind-spots in model outputs. For example, over-reliance on commuting data over-emphasises arterial routes to historic employment centres, while motorised traffic datasets disproportionately highlight long-distance car trips and neglect active travel. Transport models were developed at a time when data was scarce and expensive to collect but but the ‘data revolution’ has changed this. We argue that models should be capable of integrating open, proprietary, and crowdsourced, datasets, with ease of integrating new data sources being a key design principle. We present a case study of this approach in the Network Planning Tool for Scotland (NPT), which is publicly available at <a href="https://www.npt.scot">npt.scot</a>. The NPT integrates data on transport infrastructure from 4 sources: OpenStreetMap, Ordnance Survey (OS) OpenRoads, OS MasterMap Highways, and OS Mastermap Topography, and we are planning to add more, including from the Scottish Spatial Hub, that integrates datasets from Scottish local authorities and partners. Furthermore, the NPT integrates multiple datasets on transport behaviour (including from the Census, the Scottish Household Travel Survey and the British National Travel Survey), and scenarios of change based on international datasets, supporting more data-driven cycling strategies. The results highlight the benefits of data integration, with results tending to improve as more data sources are added, and diminishing returns highlighting the importance of careful selection of input datasets. The approach, based on reproducible code written in open source languages, can be generalised and packaged for benefit of others seeking develop future-proof modelling solutions to transport challenges. We argue that integrating diverse data sources is essential for future-proof transport modelling, enabling adaptation to evolving travel patterns and behaviours.</p>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The efficacy of transport models is increasingly tied to the diversity and richness of their input data. Historically, models often relied on simplified networks and limited datasets (e.g., trip generators focused on commuting), potentially leading to biased outputs that overlook crucial aspects like active travel or non-work trips <span class="citation" data-cites="lovelace2017">(<a href="#ref-lovelace2017" role="doc-biblioref">Lovelace et al. 2017</a>)</span>. Previous strategic network planning tools have generally focused either on behaviour data or physical infrastructure, limiting their scope <span class="citation" data-cites="vybornova2024 vierø2024">(<a href="#ref-vybornova2024" role="doc-biblioref">Vybornova et al. 2024</a>; <a href="#ref-vierø2024" role="doc-biblioref">Vierø, Vybornova, and Szell 2024</a>)</span>. The contemporary ‘data revolution’ offers an opportunity to transcend these limitations. This paper argues for, and demonstrates, an approach where transport models are designed to seamlessly integrate a variety of data types—open, proprietary, and crowdsourced. We present the Network Planning Tool for Scotland (NPT), publicly accessible at <a href="https://www.npt.scot">npt.scot</a>, as a case study. Building on prior work on the Cycle Route Uptake and Scenario Estimation tool (CRUSE) <span class="citation" data-cites="lovelace2024">(<a href="#ref-lovelace2024" role="doc-biblioref">Lovelace, Talbot, et al. 2024</a>)</span>, the NPT integrates multiple datasets, including transport infrastructure from OpenStreetMap (OSM) and Ordnance Survey (OS) products, alongside behavioural data from national travel surveys.</p>
<p>The NPT exemplifies this data-centric paradigm by integrating over a dozen datasets, including detailed infrastructure data from OpenStreetMap (OSM) and multiple Ordnance Survey (OS) products, alongside behavioural data from national travel surveys <span class="citation" data-cites="félix2025">(<a href="#ref-félix2025" role="doc-biblioref">Félix, Moura, and Lovelace 2025</a>)</span>. This integration supports a more holistic and nuanced understanding of transport systems, crucial for developing future-proof strategies that can adapt to evolving travel patterns and making transport planning more open and participatory <span class="citation" data-cites="lovelace2020a">(<a href="#ref-lovelace2020a" role="doc-biblioref">Lovelace, Parkin, and Cohen 2020</a>)</span>.</p>
</section>
<section id="methods" class="level1">
<h1>Methods</h1>
<p>The NPT’s data integration framework leverages several key datasets and bespoke open-source tools. Core network data includes:</p>
<ol type="1">
<li><p><strong>OpenStreetMap (OSM)</strong>: A rich, crowdsourced dataset providing granular details on paths, cycleways, and road attributes.</p></li>
<li><p><strong>OS OpenRoads</strong>: An open-access, simplified UK road network representation, ideal for baseline visualisations.</p></li>
<li><p><strong>OS MasterMap Highways</strong>: A detailed dataset with information on road widths and features.</p></li>
<li><p><strong>OS MasterMap Topography</strong>: The most detailed OS vector dataset, representing features like kerb lines and footways as polygons.</p></li>
</ol>
<p>Importing and processing these diverse datasets, especially large ones like OS MasterMap (often exceeding 50GB compressed), presented challenges. We developed and/or utilised tools including: - The <code>mastermapr</code> R package: Facilitates efficient import and processing of OS MasterMap data (see e.g., documentation at <a href="https://github.com/acteng/mastermapr">github.com/acteng/mastermapr</a>).</p>
<ul>
<li>The <code>osmactive</code> R package: Developed for this project, <code>osmactive</code> classifies OSM data based on attributes (e.g., <code>classify_cycle_infrastructure()</code>) and geographic relationships. For example, it calculates pavement widths from OS MasterMap Topography polygons associated with road segments (<code>get_pavement_widths()</code>) and identifies bus routes (<code>get_bus_routes()</code>).</li>
<li>anime: Approximate Network Integration, Matching and Enrichment, an algorithm implemented in a Rust crate that provides efficient and accurate network joining capabilities <span class="citation" data-cites="parry_josiahparryanime_2025">(<a href="#ref-parry_josiahparryanime_2025" role="doc-biblioref">Parry 2025</a>)</span>.</li>
</ul>
<p>These tools enable the transformation of raw, diverse datasets into harmonised inputs for the NPT. For instance, carriageway widths from OS MasterMap Highways and footway widths derived from OS MasterMap Topography (using <code>osmactive</code>) are integrated to assess space for new active travel infrastructure, considering guidance such as Cycling by Design, which builds on Department for Transport guidance <span class="citation" data-cites="departmentfortransport2020">(<a href="#ref-departmentfortransport2020" role="doc-biblioref">Department for Transport 2020</a>)</span>. Speed limit data from OSM is used to determine appropriate buffer widths for cycle infrastructure.</p>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<p>The primary outcome of this data integration strategy is the NPT web application (<a href="https://www.npt.scot">npt.scot</a>), which provides planners and the public with multifaceted insights into Scotland’s transport network, using efficient rendering of large datasets via <code>pmtiles</code> <span class="citation" data-cites="gonçalves2023">(<a href="#ref-gonçalves2023" role="doc-biblioref">Gonçalves 2023</a>)</span>. Key layers demonstrating the power of integrated data include:</p>
<ul>
<li><strong>Route Network Layer</strong>: Presents cycling potential on networks derived from both OSM and simplified OS data <span class="citation" data-cites="lovelace_reproducible_2024">(<a href="#ref-lovelace_reproducible_2024" role="doc-biblioref">Lovelace, Wang, et al. 2024</a>)</span>, allowing comparison and scenario modelling.</li>
<li><strong>Infrastructure and Traffic Layer</strong>: Combines data on existing cycle infrastructure (from OSM, classified by <code>osmactive</code> as shown in <a href="#fig-glasgow-utsg" class="quarto-xref">Figure&nbsp;1</a>) with modelled motor traffic levels.</li>
<li><strong>Street Space Layer</strong>: A novel national-level dataset visualising road classifications based on combined carriageway and corridor widths (derived from OS MasterMap products). This layer, illustrated by <a href="#fig-street-space-utsg" class="quarto-xref">Figure&nbsp;2</a>, helps identify opportunities for reallocating street space, crucial for active travel interventions.</li>
<li><strong>Core Network Layer</strong>: Represents a cohesive network that could be prioritised for new infrastructure, building on concepts of network coherence <span class="citation" data-cites="szell2021">(<a href="#ref-szell2021" role="doc-biblioref">Szell et al. 2021</a>)</span>.</li>
<li><strong>Network Planning Workspace (NPW)</strong>: An interactive component (<a href="https://nptscot.github.io/npw/">nptscot.github.io/npw/</a>) allowing users to explore data and model infrastructure changes.</li>
</ul>
<p>The integration allows for a richer analysis than single-source data would permit. <a href="#fig-glasgow-utsg" class="quarto-xref">Figure&nbsp;1</a> shows detailed cycle infrastructure classification from OSM. This data is more useful when viewed in combination with OS-derived road widths and traffic data within the NPT <a href="#fig-street-space-utsg" class="quarto-xref">Figure&nbsp;2</a>. Together, these layers provide a comprehensive basis for network planning. The ability to synthesise information, such as identifying roads with sufficient width for new cycle tracks (based on OS data) that also align with high cycling potential routes (partly OSM-derived), is a key benefit. As noted in our initial abstract, results tend to improve with more data sources, though careful selection is vital to manage complexity and ensure relevance.</p>
<div id="fig-glasgow-utsg" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-glasgow-utsg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/paste-10.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-glasgow-utsg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Cycle infrastructure classification in Glasgow, derived from OpenStreetMap data using the <code>osmactive</code> package. This detailed data is one of the many sources integrated into the NPT. See <a href="https://nptscot.github.io/#/clos:clos-layer=Infrastructure+type/#10/55.8655/-4.4098">npt.scot</a> for reproducible and interactive version of these results.
</figcaption>
</figure>
</div>
<div id="fig-street-space-utsg" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-street-space-utsg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/paste-11.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-street-space-utsg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: The Street Space layer in the NPT. This layer shows roads categorised by available width for infrastructure, derived from integrating OS MasterMap Highways and Topography data. See <a href="https://nptscot.github.io/#/streetspace/#10/55.8655/-4.4098">npt.scot</a> for a reproducible and interactive version of these results
</figcaption>
</figure>
</div>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<p>The NPT case study underscores the potential benefits of integrating diverse data sources in transport modelling. By moving beyond traditional, often siloed, datasets, we can create models that are more comprehensive, and reflective of real-world complexities. This approach directly addresses the need for “future-proof” transport modelling—systems that can adapt to new data streams, evolving policy priorities (e.g., decarbonisation, active travel promotion), and changing travel behaviours.</p>
<p>The potential benefits are manifold: improved accuracy in identifying intervention opportunities, enhanced understanding of multi-modal interactions, and greater transparency and flexibility through the use of open data and tools where possible. The open-source nature of key components like <code>osmactive</code> and <code>anime</code> further promotes reproducibility and allows the methods to be adapted for other regions or modelling challenges.</p>
<p>Future work will focus on incorporating additional datasets, such as those from Scotland’s Spatial Hub, further enriching the NPT’s analytical capabilities. The challenge of “diminishing returns” with increasing data volume necessitates ongoing research into efficient data processing, feature selection, and maintaining model parsimony while maximising explanatory power. Ultimately, a commitment to data diversity and robust integration methodologies is crucial for advancing transport planning and developing sustainable, equitable transport systems.</p>
</section>
<section id="references" class="level1">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-departmentfortransport2020" class="csl-entry" role="listitem">
Department for Transport. 2020. <span>“Cycle Infrastructure Design (LTN 1/20).”</span> London. <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/904088/cycle-infrastructure-design-ltn-1-20.pdf">https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/904088/cycle-infrastructure-design-ltn-1-20.pdf</a>.
</div>
<div id="ref-félix2025" class="csl-entry" role="listitem">
Félix, Rosa, Filipe Moura, and Robin Lovelace. 2025. <span>“Reproducible Methods for Modeling Combined Public Transport and Cycling Trips and Associated Benefits: Evidence from the biclaR Tool.”</span> <em>Computers, Environment and Urban Systems</em> 117 (April): 102230. <a href="https://doi.org/10.1016/j.compenvurbsys.2024.102230">https://doi.org/10.1016/j.compenvurbsys.2024.102230</a>.
</div>
<div id="ref-gonçalves2023" class="csl-entry" role="listitem">
Gonçalves, André Pinhal. 2023. <span>“Map Services Management.”</span> PhD thesis. <a href="https://recipp.ipp.pt/handle/10400.22/24086">https://recipp.ipp.pt/handle/10400.22/24086</a>.
</div>
<div id="ref-lovelace2017" class="csl-entry" role="listitem">
Lovelace, Robin, Anna Goodman, Rachel Aldred, Nikolai Berkoff, Ali Abbas, and James Woodcock. 2017. <span>“The Propensity to Cycle Tool: An Open Source Online System for Sustainable Transport Planning.”</span> <em>Journal of Transport and Land Use</em> 10 (1). <a href="https://doi.org/10.5198/jtlu.2016.862">https://doi.org/10.5198/jtlu.2016.862</a>.
</div>
<div id="ref-lovelace2020a" class="csl-entry" role="listitem">
Lovelace, Robin, John Parkin, and Tom Cohen. 2020. <span>“Open Access Transport Models: A Leverage Point in Sustainable Transport Planning.”</span> <em>Transport Policy</em> 97 (October): 47–54. <a href="https://doi.org/10.1016/j.tranpol.2020.06.015">https://doi.org/10.1016/j.tranpol.2020.06.015</a>.
</div>
<div id="ref-lovelace2024" class="csl-entry" role="listitem">
Lovelace, Robin, Joey Talbot, Eugeni Vidal-Tortosa, Hussein Mahfouz, Elaine Brick, Peter Wright, Gary O’Toole, Dan Brennan, and Suzanne Meade. 2024. <span>“Cycle Route Uptake and Scenario Estimation (CRUSE): An Approach for Developing Strategic Cycle Network Planning Tools.”</span> <em>European Transport Research Review</em> 16 (1): 55. <a href="https://doi.org/10.1186/s12544-024-00668-8">https://doi.org/10.1186/s12544-024-00668-8</a>.
</div>
<div id="ref-lovelace_reproducible_2024" class="csl-entry" role="listitem">
Lovelace, Robin, Zhao Wang, Will Deakin, and Josiah Parry. 2024. <span>“Reproducible Methods for Network Simplification for Data Visualisation and Transport Planning.”</span> In <em>32nd <span>GISRUK Conference</span> 2024</em>. Leeds: Zenodo. <a href="https://doi.org/10.5281/zenodo.11077553">https://doi.org/10.5281/zenodo.11077553</a>.
</div>
<div id="ref-parry_josiahparryanime_2025" class="csl-entry" role="listitem">
Parry, Josiah. 2025. <span>“<span>JosiahParry</span>/Anime.”</span> <a href="https://github.com/JosiahParry/anime">https://github.com/JosiahParry/anime</a>.
</div>
<div id="ref-szell2021" class="csl-entry" role="listitem">
Szell, Michael, Sayat Mimar, Tyler Perlman, Gourab Ghoshal, and Roberta Sinatra. 2021. <span>“Growing Urban Bicycle Networks.”</span> <em>arXiv:2107.02185 [Physics]</em>, July. <a href="http://arxiv.org/abs/2107.02185">http://arxiv.org/abs/2107.02185</a>.
</div>
<div id="ref-vierø2024" class="csl-entry" role="listitem">
Vierø, Ane Rahbek, Anastassia Vybornova, and Michael Szell. 2024. <span>“BikeDNA: A Tool for Bicycle Infrastructure Data and Network Assessment.”</span> <em>Environment and Planning B: Urban Analytics and City Science</em> 51 (2): 512–28. <a href="https://doi.org/10.1177/23998083231184471">https://doi.org/10.1177/23998083231184471</a>.
</div>
<div id="ref-vybornova2024" class="csl-entry" role="listitem">
Vybornova, Anastassia, Ane Rahbek Vierø, Kirsten Krogh Hansen, and Michael Szell. 2024. <span>“BikeNodePlanner: A Data-Driven Decision Support Tool for Bicycle Node Network Planning,”</span> December. <a href="https://doi.org/10.48550/arXiv.2412.20270">https://doi.org/10.48550/arXiv.2412.20270</a>.
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/nptscot\.github\.io\/utsg2025\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>